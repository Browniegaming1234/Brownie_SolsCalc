<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sol's RNG Aura Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      background: #0a0a12;
      color: #ddd;
      font-family: 'Exo 2', sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    h1, h2 {
      color: #00ffff;
      text-align: center;
    }
    label, input, button {
      display: block;
      width: 100%;
      margin-top: 15px;
    }
    input {
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      background: #22222a;
      color: #eee;
    }
    button {
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      background: #00ffff;
      color: #000;
      cursor: pointer;
      box-shadow: 0 0 10px #00ffff;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #00cccc;
    }
    #result {
      margin-top: 20px;
      background: #11111a;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px #004040;
      min-height: 40px;
      font-weight: 600;
    }
    #auraList, #limitedAuraList {
      margin-top: 30px;
      border-radius: 8px;
      background: #121224;
      border: 1px solid #222;
      padding: 10px 0;
    }
    .aura-item {
      padding: 10px 15px;
      border-bottom: 1px solid #222;
    }
    .rolls-info {
      font-size: 0.95rem;
      color: #bbb;
      margin-top: 4px;
    }
    #auraList::-webkit-scrollbar,
    #limitedAuraList::-webkit-scrollbar {
      width: 8px;
    }
    #auraList::-webkit-scrollbar-thumb,
    #limitedAuraList::-webkit-scrollbar-thumb {
      background: #00cccc;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>Sol's RNG Aura Calculator</h1>
  <label for="luck">Enter Your Luck:</label>
  <input type="number" id="luck" placeholder="Your Luck" min="0" step="any" />
  <button id="calculateBtn">Calculate Rolls</button>
  <div id="result"></div>
  <div id="auraList"></div>
  
  <h2>Limited-Time Auras</h2>
  <div id="limitedAuraList"></div>

  <script>
    const calculateBtn = document.getElementById('calculateBtn');
    const luckInput = document.getElementById('luck');
    const auraListDiv = document.getElementById('auraList');
    const limitedAuraListDiv = document.getElementById('limitedAuraList');

    // ... auraData and limitedAuraData here ...
    // (To keep it shorter here, use your full auraData and limitedAuraData from before)

    function formatNumber(num) {
      if (num === null || num === undefined || isNaN(num)) return 'Nil';
      return num.toLocaleString();
    }

    function createAuraList(data, container) {
      container.innerHTML = '';
      data.forEach(aura => {
        const item = document.createElement('div');
        item.className = 'aura-item';

        const title = document.createElement('div');
        const biomeStr = aura.biomeMult !== null ? `[${formatNumber(aura.biomeMult)}]` : '[Nil]';
        const normalStr = formatNumber(aura.normal);

        title.textContent = `${aura.name} [${normalStr}] ${biomeStr}`;
        title.style.fontWeight = 'bold';

        const rollsInfo = document.createElement('div');
        rollsInfo.className = 'rolls-info';
        rollsInfo.textContent = '';

        item.appendChild(title);
        item.appendChild(rollsInfo);

        item.dataset.normal = aura.normal;
        item.dataset.biomeMult = aura.biomeMult;
        item.dataset.biomeMultIsMultiplier = aura.biomeMultIsMultiplier || false;

        container.appendChild(item);
      });
    }

    function calculate() {
      const luck = parseFloat(luckInput.value);
      if (isNaN(luck) || luck <= 0) {
        alert('Please enter a valid luck value greater than 0.');
        return;
      }

      const allItems = [
        ...auraListDiv.querySelectorAll('.aura-item'),
        ...limitedAuraListDiv.querySelectorAll('.aura-item')
      ];

      allItems.forEach(item => {
        const normalDenom = parseFloat(item.dataset.normal);
        const biomeMultRaw = item.dataset.biomeMult;
        const biomeMult = biomeMultRaw === 'null' || biomeMultRaw === undefined ? null : parseFloat(biomeMultRaw);
        const biomeMultIsMultiplier = item.dataset.biomeMultIsMultiplier === 'true';

        let nativeChance = luck / normalDenom;
        if (!isFinite(nativeChance) || nativeChance <= 0) nativeChance = 0;

        const nativeRolls = nativeChance > 0 ? Math.ceil(1 / nativeChance) : Infinity;
        let text = '';

        if (biomeMult !== null && biomeMult > 0) {
          const btDenominator = biomeMultIsMultiplier ? (normalDenom / biomeMult) : (normalDenom * biomeMult);
          let btChance = luck / btDenominator;
          if (!isFinite(btChance) || btChance <= 0) btChance = 0;

          const btRolls = btChance > 0 ? Math.ceil(1 / btChance) : Infinity;

          text = `Native Rolls: ${nativeRolls === Infinity ? '∞' : formatNumber(nativeRolls)}, Breakthrough Rolls: ${btRolls === Infinity ? '∞' : formatNumber(btRolls)}`;
        } else {
          text = `Rolls needed: ${nativeRolls === Infinity ? '∞' : formatNumber(nativeRolls)}`;
        }

        item.querySelector('.rolls-info').textContent = text;
      });
    }

    createAuraList(auraData, auraListDiv);
    createAuraList(limitedAuraData, limitedAuraListDiv);

    calculateBtn.addEventListener('click', calculate);
    luckInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        calculate();
      }
    });
  </script>
</body>
</html>
