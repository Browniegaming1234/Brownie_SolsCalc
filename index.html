<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sol's RNG Aura Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      background: #0a0a12;
      color: #ddd;
      font-family: 'Exo 2', sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    h1 {
      font-size: 2.5rem;
      color: #00ffff;
      text-align: center;
    }
    label, input, button {
      display: block;
      width: 100%;
      margin-top: 15px;
    }
    input {
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      background: #22222a;
      color: #eee;
    }
    button {
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      background: #00ffff;
      color: #000;
      cursor: pointer;
      box-shadow: 0 0 10px #00ffff;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #00cccc;
    }
    #result {
      margin-top: 20px;
      background: #11111a;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px #004040;
      min-height: 40px;
      font-weight: 600;
    }
    #auraList {
      margin-top: 30px;
      max-height: 600px;
      overflow-y: auto;
      border-radius: 8px;
      background: #121224;
      border: 1px solid #222;
      padding: 10px 0;
    }
    .aura-item {
      padding: 10px 15px;
      border-bottom: 1px solid #222;
    }
    .rolls-info {
      font-size: 0.95rem;
      color: #bbb;
      margin-top: 4px;
    }
    #auraList::-webkit-scrollbar {
      width: 8px;
    }
    #auraList::-webkit-scrollbar-thumb {
      background: #00cccc;
      border-radius: 4px;
    }

    /* Aura-specific title colors / gradients from Sol's RNG wiki */
    .Common { color: #ffffff; }
    .Uncommon { color: #90ee90; }
    .Natural { color: #00ff00; }
    .Good { color: #cccccc; }
    .Ink { color: #000000; }
    .Glock { color: #a9a9a9; }
    .Ash { color: #000000; }
    .Player { color: #ffffff; }
    .Aquatic { color: #00bfff; }
    .Nautilus { background: linear-gradient(90deg, #1e90ff, #06a0c6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .AquaticFlame { color: #ff8c00; }

    .Emerald { color: #00a354; }
    .Topaz { color: #985d19; }
    .Jackpot { color: #ffea00; }
    .Sapphire { color: #0f52ba; }
    .Aquamarine { color: #7fffd4; }

    .Divinus { color: #fff700; }
    .Crystallized { color: #cf9fff; }
    .Precious { color: #4169e1; }
    .Magnetic { background: linear-gradient(90deg, #0000ff, #ff0000); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .Sidereum { background: linear-gradient(90deg, #da70d6, #ffd700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

    .Flushed { color: #fff700; }
    .FlushedLobotomy { color: #ff8c00; }
    .Quartz { color: #ff1493; }

    .Forbidden { color: #090925; }
    .Diaboli { color: #db1a1a; }
    .Bleeding { color: #ff0000; }
    .LostSoul { color: #a880e8; }
    .Undead { color: #739b00; }
    .Corrosive { color: #7ac74f; }
    .Hazard { background: linear-gradient(90deg, #8a2be2, #1e90ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .HazardRays { color: #1e90ff; }
    .Rage { color: #dc143c; }
    .RageHeated { color: #ff4500; }
    .UndeadDevil { color: #d10c04; }
    .DiaboliVoid { color: #9e1f0f; }

    .Gilded { color: #ffac1c; }
    .Ruby { color: #e10303; }
    .Jade { color: #00a86b; }
    .Bounded { color: #4169e1; }
    .Celestial { background: linear-gradient(90deg, #add8e6, #cfb3f5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .Sailor { color: #00ccff; }
    .Poseidon { color: #02a2b9; }
    .CelestialDivine { color: #fbb03b; }
    .Exotic { color: #000000; }
    .ExoticAPEX { color: #000000; }
    .SailorFlyingDutchman { color: #44ccff; }
    .Sovereign { background: linear-gradient(90deg, #0000ff, #ffd700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

    .Aegis { color: #4b6d99; }
    .AbyssalHunter { color: #0b5f6f; }

    .Comet { color: #ffffff; }
    .Permafrost { color: #c5f2ff; }
    .Stormal { color: #9bc3ff; }
    .Galaxy { color: #ffffff; }
    .LunarFullMoon { color: #ffd700; }
    .Twilight { color: #8a2be2; }
    .Arcane { color: #663399; }
    .Starscourge { color: #dc143c; }
    .Gravitational { color: #8a2be2; }
    .BoundedUnbounded { color: #4169e1; }
    .Virtual { color: #00ffff; }
    .Savior { color: #e6e6fa; }
    .SolarSolstice { color: #ffff00; }
    .Hades { color: #ff8c00; }
    .HYPERVOLT { color: #8a2be2; }
    .Nihility { color: #a9a9a9; }
    .Glitch { color: #000000; }
    .StormalHurricane { color: #a9a9a9; }
    .SIRIUS { color: #ffd700; }
    .ArcaneLegacy { color: #663399; }
    .Chromatic { color: #ff66cc; }
    .ArcaneDark { color: #4b0082; }
    .Ethereal { color: #eeeeee; }
    .Overseer { color: #dda0dd; }
    .Matrix { color: #00ffaa; }
    .TwilightIridescentMemory { color: #ffffff; }
    .ChromaticGenesis { color: #ccccff; }
    .StarscourgeRadiant { color: #add8e6; }
    .Overture { color: #4169e1; }
    .Symphony { color: #add8e6; }
    .Impeached { color: #8a2be2; }
    .Oppression { color: #000000; }
    .Archangel { color: #ffd700; }
    .OvertureHistory { color: #4169e1; }
    .Ruins { color: #7b7b7b; }
    .Atlas { color: #2f4f4f; }
    .Apostolos { color: #ffffff; }
    .Gargantua { color: #696969; }
    .Pixelation { color: #000000; }
    .Luminosity { color: #add8e6; }
    .Equinox { color: #ffffff; }
  </style>
</head>
<body>
  <h1>Sol's RNG Aura Calculator</h1>
  <label for="luck">Enter Your Luck:</label>
  <input type="number" id="luck" placeholder="Your Luck" min="0" step="any" />
  <button id="calculateBtn">Calculate Rolls</button>
  <div id="result"></div>
  <div id="auraList"></div>

  <script>
    const auraData = [
      {name: "Common", normal: 2, biomeMult: null},
      {name: "Uncommon", normal: 4, biomeMult: null},
      {name: "Natural", normal: 8, biomeMult: null},
      {name: "Good", normal: 5, biomeMult: null},
      {name: "Ink", normal: 700, biomeMult: null},
      {name: "Glock", normal: 1700, biomeMult: null},
      {name: "Ash", normal: 2300, biomeMult: null},
      {name: "Player", normal: 3000, biomeMult: null},
      {name: "Aquatic", normal: 40000, biomeMult: null},
      {name: "Nautilus", normal: 70000, biomeMult: null},
      {name: "Aquatic: Flame", normal: 4000000, biomeMult: null},

      {name: "Emerald", normal: 500, biomeMult: null},
      {name: "Topaz", normal: 150, biomeMult: null},
      {name: "Jackpot", normal: 777, biomeMult: null},
      {name: "Sapphire", normal: 800, biomeMult: null},
      {name: "Aquamarine", normal: 900, biomeMult: null},

      {name: "Divinus", normal: 32, biomeMult: null},
      {name: "Crystallized", normal: 64, biomeMult: null},
      {name: "Precious", normal: 1024, biomeMult: null},
      {name: "Magnetic", normal: 2048, biomeMult: null},
      {name: "Sidereum", normal: 4096, biomeMult: null},

      {name: "Flushed", normal: 6900, biomeMult: null},
      {name: "Flushed: Lobotomy", normal: 69000, biomeMult: null},
      {name: "Quartz", normal: 8192, biomeMult: null},

      {name: "Forbidden", normal: 404, biomeMult: null},
      {name: "Diaboli", normal: 1004, biomeMult: null},
      {name: "Bleeding", normal: 4444, biomeMult: null},
      {name: "Lost Soul", normal: 9200, biomeMult: null},
      {name: "Undead", normal: 10000, biomeMult: 6},
      {name: "Corrosive", normal: 12000, biomeMult: 5},
      {name: "Hazard", normal: 7000, biomeMult: 5},
      {name: "Hazard: Rays", normal: 70000, biomeMult: 5},
      {name: "Rage", normal: 128, biomeMult: null},
      {name: "Rage: Heated", normal: 12800, biomeMult: null},
      {name: "Undead: Devil", normal: 100000, biomeMult: 6},
      {name: "Diaboli: Void", normal: 100400, biomeMult: null},

      {name: "Gilded", normal: 512, biomeMult: 4},
      {name: "Ruby", normal: 350, biomeMult: null},
      {name: "Jade", normal: 125000, biomeMult: null},
      {name: "Bounded", normal: 200000, biomeMult: null},
      {name: "Celestial", normal: 350000, biomeMult: null},
      {name: "Sailor", normal: 12000000, biomeMult: 4},
      {name: "Poseidon", normal: 3800000, biomeMult: 4},
      {name: "Celestial Divine", normal: 7000000, biomeMult: null},
      {name: "Exotic", normal: 99999, biomeMult: null},
      {name: "Exotic: APEX", normal: 49999500, biomeMult: null},
      {name: "Sailor: Flying Dutchman", normal: 80000000, biomeMult: 4},
      {name: "Sovereign", normal: 750000000, biomeMult: null},
      {name: "Aegis", normal: 825000000, biomeMult: null},
      {name: "Abyssal Hunter", normal: 400000000, biomeMult: 4},

      {name: "Comet", normal: 12000, biomeMult: 10},
      {name: "Permafrost", normal: 73500, biomeMult: 3},
      {name: "Stormal", normal: 90000, biomeMult: 3},
      {name: "Galaxy", normal: 500000, biomeMult: 10},
      {name: "Lunar: Full Moon", normal: 500000, biomeMult: 10},
      {name: "Twilight", normal: 600000, biomeMult: 10},
      {name: "Arcane", normal: 1000000, biomeMult: null},
      {name: "Starscourge", normal: 1000000, biomeMult: 10},
      {name: "Gravitational", normal: 2000000, biomeMult: null},
      {name: "Bounded Unbounded", normal: 2000000, biomeMult: null},
      {name: "Virtual", normal: 2500000, biomeMult: null},
      {name: "Savior", normal: 3200000, biomeMult: null},
      {name: "Solar: Solstice", normal: 5000000, biomeMult: 10},
      {name: "Hades", normal: 6666666, biomeMult: 6},
      {name: "HYPERâ€‘VOLT", normal: 7500000, biomeMult: null},
      {name: "Nihility", normal: 9000000, biomeMult: 1000},
      {name: "Glitch", normal: 12210110, biomeMult: null},
      {name: "Stormal Hurricane", normal: 13500000, biomeMult: null},
      {name: "SIRIUS", normal: 14000000, biomeMult: null},
      {name: "Arcane: Legacy", normal: 15000000, biomeMult: null},
      {name: "Chromatic", normal: 20000000, biomeMult: null},
      {name: "Arcane: Dark", normal: 30000000, biomeMult: null},
      {name: "Ethereal", normal: 35000000, biomeMult: null},
      {name: "Overseer", normal: 45000000, biomeMult: null},
      {name: "Matrix", normal: 50000000, biomeMult: null},
      {name: "Twilight: Iridescent Memory", normal: 60000000, biomeMult: 10},
      {name: "Chromatic: GENESIS", normal: 99999999, biomeMult: null},
      {name: "Starscourge: Radiant", normal: 100000000, biomeMult: 10},
      {name: "Overture", normal: 150000000, biomeMult: null},
      {name: "Symphony", normal: 175000000, biomeMult: null},
      {name: "Impeached", normal: 200000000, biomeMult: null},
      {name: "Oppression", normal: 220000000, biomeMult: null},
      {name: "Archangel", normal: 250000000, biomeMult: null},
      {name: "Overture: History", normal: 300000000, biomeMult: null},
      {name: "Ruins", normal: 300000000, biomeMult: null},
      {name: "Atlas", normal: 360000000, biomeMult: null},
      {name: "Apostolos", normal: 444000000, biomeMult: null},
      {name: "Gargantua", normal: 430000000, biomeMult: null},
      {name: "Pixelation", normal: 1073741824, biomeMult: null},
      {name: "Luminosity", normal: 1200000000, biomeMult: null},
      {name: "Equinox", normal: 2500000000, biomeMult: null}
    ];

    const auraListDiv = document.getElementById('auraList');
    const resultDiv = document.getElementById('result');
    const luckInput = document.getElementById('luck');
    const calculateBtn = document.getElementById('calculateBtn');

    // Sort auras ascending by 'normal' denominator for display order
    auraData.sort((a, b) => a.normal - b.normal);

    // Calculate number of rolls needed for 99.9% chance given chance per roll
    function rollsNeeded(chance) {
      const targetProb = 0.999;
      if (chance <= 0) return Infinity;
      return Math.ceil(Math.log(1 - targetProb) / Math.log(1 - chance));
    }

    // Create the aura list UI with name and empty rolls info
    function createAuraList() {
      auraListDiv.innerHTML = '';
      auraData.forEach(aura => {
        const item = document.createElement('div');
        item.className = 'aura-item';

        // Class for styling - sanitize by removing spaces and special chars
        const auraClass = aura.name.replace(/[^a-zA-Z0-9]/g, '');
        const title = document.createElement('div');
        title.textContent = aura.name;
        title.className = auraClass;

        const rollsInfo = document.createElement('div');
        rollsInfo.className = 'rolls-info';
        rollsInfo.textContent = '';

        item.appendChild(title);
        item.appendChild(rollsInfo);

        item.dataset.normal = aura.normal;
        item.dataset.biomeMult = aura.biomeMult;

        auraListDiv.appendChild(item);
      });
    }

    // Calculate and display rolls info for each aura based on user luck input
    function calculate() {
      const luck = parseFloat(luckInput.value);
      if (isNaN(luck) || luck <= 0) {
        resultDiv.textContent = 'Please enter a valid luck value greater than 0.';
        return;
      }
      resultDiv.textContent = '';

      const auraItems = auraListDiv.querySelectorAll('.aura-item');

      auraItems.forEach(item => {
        const normalChanceDenom = parseFloat(item.dataset.normal);
        const biomeMult = item.dataset.biomeMult ? parseFloat(item.dataset.biomeMult) : null;

        const nativeChance = luck / normalChanceDenom;
        const nativeRolls = nativeChance > 0 ? rollsNeeded(nativeChance) : Infinity;

        let rollsText;
        if (biomeMult && biomeMult > 0) {
          const breakthroughChance = luck / (normalChanceDenom / biomeMult);
          const breakthroughRolls = breakthroughChance > 0 ? rollsNeeded(breakthroughChance) : Infinity;
          rollsText = `Native Rolls: ${nativeRolls.toLocaleString()}, Breakthrough Rolls: ${breakthroughRolls.toLocaleString()}`;
        } else {
          rollsText = `Rolls needed: ${nativeRolls.toLocaleString()}`;
        }

        item.querySelector('.rolls-info').textContent = rollsText;
      });
    }

    // Initialize list on load
    createAuraList();

    // Make calculate globally accessible
    window.calculate = calculate;

    // Add event listeners
    calculateBtn.addEventListener('click', calculate);
    luckInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') calculate();
    });
  </script>
</body>
</html>
